{"title":"Connecting reactivity between modules","markdown":{"yaml":{"title":"Connecting reactivity between modules","subtitle":"Using `gargoyle` to manage reactivity","author":"Martin Frigaard","date":"2023-06-18","categories":["shiny","testing"],"toc":true,"toc-depth":5,"toc-title":"Contents","toc-location":"left","draft":true,"code-fold":"show","code-summary":"view code","fig-align":"center","fontsize":"10.5","callout-icon":false,"freeze":true,"execute":{"echo":true,"message":false,"warning":false,"eval":false}},"headingText":"remotes::install_github(\"mjfrigaard/tsap\",","containsRefs":false,"markdown":"\n\n```{r}\n#| label: setup\n#| eval: true \n#| echo: false \n#| include: false\nco_box <- function(color, header, contents = \"Your text\") {\n  class <- switch(color,\n    b = \"note\",\n    g = \"tip\",\n    r = \"important\",\n    o = \"caution\",\n    stop(\"Invalid `type`\", call. = FALSE)\n  )\n  switch(color,\n    b = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    g = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; font-weight: bold; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    o = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    r = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; font-weight: bold; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    stop(\"Invalid `type`\", call. = FALSE)\n  )\n}\noptions(scipen = 999)\n#   force = TRUE, quiet = TRUE)\nlibrary(tsap)\nlibrary(palmerpenguins)\nlibrary(NHANES)\n```\n\n\n```{r}\n#| label: co_box_dev\n#| echo: false\n#| results: asis\n#| eval: true\nco_box(color = \"r\", \n  header = \"ALERT!\", \n  contents = \"This post is currently under development. Thank you for your patience.\")\n```\n\n# `gargoyle`\n\nI have a couple options here; I could rebuild/combine `mod_cols` and `mod_plot` and hope this resolves the error, or I could use the [`gargoyle` package](https://github.com/ColinFay/gargoyle) by the geniuses over at [`ThinkR`](https://rtask.thinkr.fr/shiny-applications-design-and-deployment/):\n\n> *{`shiny`}’s default reactive behavior is very helpful when it comes to building small applications. Because, you know, the good thing about reactivity is that when something moves somewhere, it’s updated everywhere. But the bad thing about reactivity is that when something moves somewhere, it’s updated everywhere.*\n\n`gargoyle` comes from the same authors of [`golem`](https://thinkr-open.github.io/golem/), and it supports \"*Event-Based Structures for 'Shiny'*\". It's elegant and simple (remember these three functions): `init()`, `trigger()`, and `watch()`.\n\nThe [example in the documentation](https://github.com/ColinFay/gargoyle) gives an overview of how `gargoyle` works, but it's not in a package (and doesn't use modules). You can see a deployed version of `gargoyle` built as a package using modules [here.](https://mjfrigaard.shinyapps.io/gargap-demo/). \n\nI'll cover how `gargoyle` works using the demos in the `inst/dev` folder: \n\n## `init()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L66)\n\n## `on()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L124)\n\n## `trigger()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L78)\n\n## `watch()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L106)\n\n\n\n\n\n\n\n\n\n\n\n\n## testServer() + browser()\n\n::: {style='font-size: 1.10em; font-weight: bold;'}\n\n> *\"You can abuse `testServer()` to get in an interactive environment that does support reactivity: `testServer(myApp(), browser())`\"*\n\n:::\n\nThe quote above comes from the ['Testing' chapter of Mastering Shiny](https://mastering-shiny.org/scaling-testing.html). \n","srcMarkdownNoYaml":"\n\n```{r}\n#| label: setup\n#| eval: true \n#| echo: false \n#| include: false\nco_box <- function(color, header, contents = \"Your text\") {\n  class <- switch(color,\n    b = \"note\",\n    g = \"tip\",\n    r = \"important\",\n    o = \"caution\",\n    stop(\"Invalid `type`\", call. = FALSE)\n  )\n  switch(color,\n    b = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    g = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; font-weight: bold; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    o = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    r = cat(paste0(\n      \"\\n\",\n      \":::: {.callout-\", class, \" collapse='false'}\", \"\\n\\n\",\n      \"## \", header, \"\\n\\n\",\n      \"::: {style='font-size: 1.10em; font-weight: bold; color: #696969;'}\\n\\n\",\n      glue::glue_collapse(contents), \"\\n\\n\",\n      \"::: \\n\\n\",\n      \"::::\", \"\\n\"\n    )),\n    stop(\"Invalid `type`\", call. = FALSE)\n  )\n}\noptions(scipen = 999)\n# remotes::install_github(\"mjfrigaard/tsap\",\n#   force = TRUE, quiet = TRUE)\nlibrary(tsap)\nlibrary(palmerpenguins)\nlibrary(NHANES)\n```\n\n\n```{r}\n#| label: co_box_dev\n#| echo: false\n#| results: asis\n#| eval: true\nco_box(color = \"r\", \n  header = \"ALERT!\", \n  contents = \"This post is currently under development. Thank you for your patience.\")\n```\n\n# `gargoyle`\n\nI have a couple options here; I could rebuild/combine `mod_cols` and `mod_plot` and hope this resolves the error, or I could use the [`gargoyle` package](https://github.com/ColinFay/gargoyle) by the geniuses over at [`ThinkR`](https://rtask.thinkr.fr/shiny-applications-design-and-deployment/):\n\n> *{`shiny`}’s default reactive behavior is very helpful when it comes to building small applications. Because, you know, the good thing about reactivity is that when something moves somewhere, it’s updated everywhere. But the bad thing about reactivity is that when something moves somewhere, it’s updated everywhere.*\n\n`gargoyle` comes from the same authors of [`golem`](https://thinkr-open.github.io/golem/), and it supports \"*Event-Based Structures for 'Shiny'*\". It's elegant and simple (remember these three functions): `init()`, `trigger()`, and `watch()`.\n\nThe [example in the documentation](https://github.com/ColinFay/gargoyle) gives an overview of how `gargoyle` works, but it's not in a package (and doesn't use modules). You can see a deployed version of `gargoyle` built as a package using modules [here.](https://mjfrigaard.shinyapps.io/gargap-demo/). \n\nI'll cover how `gargoyle` works using the demos in the `inst/dev` folder: \n\n## `init()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L66)\n\n## `on()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L124)\n\n## `trigger()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L78)\n\n## `watch()`\n\nThis [function](https://github.com/ColinFay/gargoyle/blob/83234de417b9b0b39be9b8f1556e5df1968624b2/R/funs.R#L106)\n\n\n\n\n\n\n\n\n\n\n\n\n## testServer() + browser()\n\n::: {style='font-size: 1.10em; font-weight: bold;'}\n\n> *\"You can abuse `testServer()` to get in an interactive environment that does support reactivity: `testServer(myApp(), browser())`\"*\n\n:::\n\nThe quote above comes from the ['Testing' chapter of Mastering Shiny](https://mastering-shiny.org/scaling-testing.html). \n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":false,"cache":null,"freeze":true,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"center","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","dpi":320,"toc":true,"toc-depth":5,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","description-meta":"Martin Frigaard's personal website.","knitr":{"opts_chunk":{"collapse":true}},"editor":{"mode":"source"},"theme":{"light":["litera","../../custom.scss"]},"fig-asp":0.618,"fontsize":"10.5","toc-title":"Contents","toc-location":"left","callout-icon":false,"code-block-bg":"#f8f8f8","code-block-border-left":"#e8e8e8","code-summary":"view code","title-block-banner":true,"title":"Connecting reactivity between modules","subtitle":"Using `gargoyle` to manage reactivity","author":"Martin Frigaard","date":"2023-06-18","categories":["shiny","testing"],"draft":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}